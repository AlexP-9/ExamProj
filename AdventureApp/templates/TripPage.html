{% extends "BaseTempl.html" %}
{% load static %}

{% block title %}
{{ tripobj.title }}
{% endblock %}

{% block body %}
<div class="trip-header">
  <h1 class="trip-title">{{ tripobj.title }}</h1>
  <p class="trip-description"><i>{{ tripobj.description }}</i></p>

  <p class="date-heading">Closest available dates:</p>
    {% if schedule %}
    <div class="date-links">
        {% for s in schedule|slice:":10" %}
        <a href="{% url 'trip_register' s.id %}" class="grey-button">{{ s.start }}</a>
        {% endfor %}
    </div>
    <br>
    <a href="{% url 'trip_full_schedule' tripobj.id %}" class="red-button">See other available dates</a>
    {% else %}
    <p style="text-align: center;">(No scheduled dates so far)</p>
    {% endif %}

</div>




<div class="trip-photo-grid">
  {% for p in picobjs %}
    <div class="photo-tile">
      <input type="checkbox" id="popup-toggle-{{ forloop.counter }}" class="popup-toggle" hidden>
      
      <label for="popup-toggle-{{ forloop.counter }}" class="photo-label">
        <img src="{{ p.picture.url }}" alt="Trip image" class="photo-thumb">
      </label>

      <div class="popup-overlay">
        <label for="popup-toggle-{{ forloop.counter }}" class="popup-backdrop"></label>
        <div class="popup-box">
          <img src="{{ p.picture.url }}" alt="Trip enlarged image">
        </div>
      </div>
    </div>
  {% endfor %}
</div>



<!-- Reviews -->
<h3 style="text-align: center;"><u>Reviews</u></h3>
<div class="reviews-container">
  {% for r in reviews %}
    <div class="review-card">
      <div class="review-rating">{{ r.rating }}/10</div>
      <div class="review-title">"{{ r.revtitle }}"</div>
      <div class="review-meta">{{ r.customer }} at {{ r.date_created }}</div>
      <div class="review-comment">{{ r.comment }}</div>
    </div>
  {% empty %}
    <p>There are no reviews.</p>
  {% endfor %}
</div>


{% endblock body %}
