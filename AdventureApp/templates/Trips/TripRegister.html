{% extends "BaseTempl.html" %}
{% load static %}

{% block title %}
{{ tripobj.title }}
{% endblock %}

{% block body %}
<div class="trip-register-wrapper">

  {% if request.user.is_staff %}
      <h1 class="trip-title">Wait just a moment, you're a staff member!</h1>
      <p class="note-text">We all deserve a break, so please contact your boss about this :-)</p>

  {% elif scheddb.0 %}
      <a href="{% url 'trip' scheddb.0.trip.id %}" class="back-link">‚Üê Back to the trip page</a>

      <h2 class="trip-title">Trip details</h2>

      <table class="trip-details-table">
          <tr>
              <td>Name</td>
              <td>{{ scheddb.0.trip.title }}</td>
          </tr>
          <tr>
              <td>Start date</td>
              <td>{{ scheddb.0.start }}</td>
          </tr>
          <tr>
              <td>End date</td>
              <td>{{ scheddb.0.end }}</td>
          </tr>
          <tr>
              <td>Participants</td>
              <td>{{ scheddb.0.attendants.count }}/{{ scheddb.0.maxattendants }}</td>
          </tr>
      </table>

      {% if request.user.is_authenticated %}
      
          <a href="{% url 'trip_register_confirm' scheddb.0.id %}" class="red-button register-button">Register</a>
      {% else %}
          <p class="note-text">
            You need to <a href="{% url 'login' %}">log in</a> or 
            <a href="{% url 'registration' %}">sign up</a> to register!
          </p>
      {% endif %}

  {% else %}
      <h1 class="trip-title">Can't register for this trip!</h1>
      <p class="note-text">
        If you believe that it's a mistake, please 
        <a href="{% url 'contact' %}">contact us</a>.
      </p>
  {% endif %}

</div>
{% endblock body %}
