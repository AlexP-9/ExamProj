{% extends "BaseTempl.html" %}
{% load static %}

{% block title %}
{{ tripobj.title }}
{% endblock %}

{% block body %}
<div class="trip-register-wrapper">

  {% if request.user.is_staff %}
      <h1 class="trip-title">Wait just a moment, you're a staff member!</h1>
      <p class="note-text">We all deserve a break, so please contact your boss about this :-)</p>

  {% elif scheddb %}
      <a href="{% url 'trip' scheddb.trip.id %}" class="back-link">‚Üê Back to the trip page</a>

      <h2 class="trip-title">Trip details</h2>

      <table class="trip-details-table">
          <tr>
              <td>Name</td>
              <td>{{ scheddb.trip.title }}</td>
          </tr>
          <tr>
              <td>Start date</td>
              <td>{{ scheddb.start }}</td>
          </tr>
          <tr>
              <td>End date</td>
              <td>{{ scheddb.end }}</td>
          </tr>
          <tr>
              <td>Participants</td>
              <td>{{ scheddb.attendants.count }}/{{ scheddb.maxattendants }}</td>
          </tr>
      </table>

      {% if overlaps %}
      <h3>Warning! There are overlaps with the following scheduled trips:</h3>
      <ul>
        {% for o in overlaps %}
            <li>{{o.trip.title}} - starts {{o.start}}, ends {{o.end}}</li>
        {% endfor %}
      </ul>
      {% endif %}

      {% if request.user.is_authenticated %}
          <a href="{% url 'trip_register_confirm' scheddb.id %}" class="red-button register-button">Register{% if overlaps %} anyway{% endif %}</a>
      {% else %}
          <p class="note-text">
            You need to <a href="{% url 'login' %}">log in</a> or 
            <a href="{% url 'registration' %}">sign up</a> to register!
          </p>
      {% endif %}

  {% else %}
      <h1 class="trip-title">Can't register for this trip!</h1>
      <p class="note-text">
        If you believe that it's a mistake, please 
        <a href="{% url 'contact' %}">contact us</a>.
      </p>
  {% endif %}

</div>
{% endblock body %}
