{% extends "BaseTempl.html" %}
{% load static %}

{% block title %}
Our Trips
{% endblock %}

{% block headextra %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
{% endblock headextra %}

{% block body %}
<main>
  <section class="py-5 text-center container">
    <div class="row py-lg-4">
      <div class="col-lg-6 col-md-8 mx-auto">
        <h1 class="fw-bold">Our Trips</h1>
        <p class="lead text-muted">Explore our latest adventures across Europe.</p>
      </div>
    </div>
  </section>

  {% if tags %}

  <p>Filter trips:</p>
  <form>
    {% for t in tags %}
    <input type="checkbox" name="{{t.name}}" id="{{t.name}}" {% if t.name in request.GET %}checked{% endif %}>
    <label for="{{t.name}}">{{t.name}}</label><br>
    {% endfor %}
    <button class="btn btn-success py-2" type="submit">Filter</button>
  </form>

  {% endif %}

  <div class="album py-5 bg-light">
    <div class="container">
      <div class="row row-cols-1 row-cols-md-3 g-4">
        {% for trip in trips %}
          <div class="col">
            <div class="card shadow-sm h-100">
              {% with trip.tripgallery_set.first as first_image %}
                {% if first_image %}
                  <img src="{{ first_image.picture.url }}" class="bd-placeholder-img card-img-top" alt="{{ trip.title }}">
                {% else %}
                  <svg class="bd-placeholder-img card-img-top" width="100%" height="225" xmlns="http://www.w3.org/2000/svg"
                       role="img" preserveAspectRatio="xMidYMid slice" focusable="false">
                    <title>Placeholder</title>
                    <rect width="100%" height="100%" fill="#868e96"></rect>
                    <text x="50%" y="50%" fill="#dee2e6" dy=".3em">No image</text>
                  </svg>
                {% endif %}
              {% endwith %}
              <div class="card-body">
                <h5 class="card-title">{{ trip.title }}</h5>
                <h6 class="card-subtitle mb-2 text-muted">{{ trip.difficulty }}</h6>
                <p class="card-text">{{ trip.description|truncatewords:20 }}</p>
                <div class="d-flex justify-content-between align-items-center">
                  <a href="{% url 'trip' trip.id %}" class="btn btn-sm btn-outline-primary">View Trip</a>
                </div>
              </div>
            </div>
          </div>
        {% empty %}
          <div class="col">
            <p class="text-center">No trips available yet.</p>
          </div>
        {% endfor %}
      </div>
    </div>
  </div>
</main>
{% endblock body %}
