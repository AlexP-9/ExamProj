{% extends "BaseTempl.html" %}
{% load static %}

{% block title %}
Schedule
{% endblock title %}

{% block body %}
<h1 class="trip-title" style="text-align: center;">Schedule</h1>

<div class="schedule-admin-wrapper">

  <a href="{% url 'man_schedule_add' %}" class="red-button">Add New</a>

  <table class="schedule-admin-table">
    <caption>Active trips</caption>
    <thead>
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>From</th>
        <th>To</th>
        <th>Price</th>
        <th>Guides</th>
        <th>Attendants</th>
        <th>Max. Attendants</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for s in SchedObjsActive %}
      <tr>
        <td>{{ s.id }}</td>
        <td>{{ s.trip.title }}</td>
        <td>{{ s.start }}</td>
        <td>{{ s.end }}</td>
        <td>{{ s.price }}</td>
        <td>
          {% for g in s.guides.all %}
            {{ g }}{% if not forloop.last %}; {% endif %}
          {% endfor %}
        </td>
        <td>{{ s.attendants.count }}</td>
        <td>{{ s.maxattendants }}</td>
        <td>
          <a href="{% url 'man_schedule_edit' s.id %}">Edit</a>
          <a href="{% url 'man_schedule_delete' s.id %}">Delete</a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <table class="schedule-admin-table">
    <caption>Future trips</caption>
    <thead>
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>From</th>
        <th>To</th>
        <th>Price</th>
        <th>Guides</th>
        <th>Attendants</th>
        <th>Max. Attendants</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for s in SchedObjsFuture %}
      <tr>
        <td>{{ s.id }}</td>
        <td>{{ s.trip.title }}</td>
        <td>{{ s.start }}</td>
        <td>{{ s.end }}</td>
        <td>{{ s.price }}</td>
        <td>
          {% for g in s.guides.all %}
            {{ g }}{% if not forloop.last %}; {% endif %}
          {% endfor %}
        </td>
        <td>{{ s.attendants.count }}</td>
        <td>{{ s.maxattendants }}</td>
        <td>
          <a href="{% url 'man_schedule_edit' s.id %}">Edit</a>
          <a href="{% url 'man_schedule_delete' s.id %}">Delete</a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <table class="schedule-admin-table">
    <caption>Past trips</caption>
    <thead>
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>From</th>
        <th>To</th>
        <th>Price</th>
        <th>Guides</th>
        <th>Attendants</th>
        <th>Max. Attendants</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for s in SchedObjsPast %}
      <tr>
        <td>{{ s.id }}</td>
        <td>{{ s.trip.title }}</td>
        <td>{{ s.start }}</td>
        <td>{{ s.end }}</td>
        <td>{{ s.price }}</td>
        <td>
          {% for g in s.guides.all %}
            {{ g }}{% if not forloop.last %}; {% endif %}
          {% endfor %}
        </td>
        <td>{{ s.attendants.count }}</td>
        <td>{{ s.maxattendants }}</td>
        <td>
          <a href="{% url 'man_schedule_edit' s.id %}">Edit</a>
          <a href="{% url 'man_schedule_delete' s.id %}">Delete</a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

</div>
{% endblock body %}
